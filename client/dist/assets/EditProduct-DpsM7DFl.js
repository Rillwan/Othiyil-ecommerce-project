import{r as j,N as f,u as y,K as v,j as e,A as N,Q as n}from"./index-CZDcjD-5.js";import{u as w}from"./useProductAPI-B0WxZtxn.js";import{B as P}from"./index--kR_NaOo.js";const A=()=>{const[c,x]=j.useState([]),i=f(),{token:d}=y(r=>r.auth),{UpdateProductAPI:m,Progress:o,AdminProductByIdAPI:u,ProductDetails:a,setProductDetails:t}=w();v(async()=>{d&&i?.id&&await u({token:d,pid:i.id})});const p=async r=>{if(r.preventDefault(),!d)return;if(!a.name?.length>0){n.error("Please add a product name");return}else if(a.category){if(!a.brand){n.error("Please select a brand");return}}else{n.error("Please select a category");return}const s={...a,images:c.map(l=>l.file)};await m({product:s,token:d,id:i?.id})},g=()=>{t({name:"",description:"",category:"",subCategory:"",brand:"",measurement:"",color:""}),x([])},h=r=>{const s=r.map(l=>({file:l,previewURL:URL.createObjectURL(l)}));x(l=>[...l,...s])},b=(r,s)=>(r.preventDefault(),n.error("Image removal is disabled in edit mode."));return e.jsx("div",{className:"AddProduct p-2",children:e.jsxs("div",{children:[e.jsx("h1",{className:"section-header text-[1.3rem] font-semibold",children:"Edit Product"}),e.jsx("p",{className:" text-[13px] text-slate-600",children:"If a design error occurs, reload the window."}),e.jsx("form",{onSubmit:p,children:e.jsxs("div",{className:"md:flex grid gap-4 mt-4",children:[e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col gap-4 items-center justify-center w-full h-full",children:[e.jsx("div",{className:"flex justify-center flex-wrap gap-4",children:a?.images?.map((r,s)=>e.jsxs("div",{className:"w-[120px] bg-gray-200 rounded-xl p-2",children:[e.jsx("img",{className:"rounded-lg aspect-square object-cover object-center w-full",src:`${N}/image/100/${r}`,alt:""}),e.jsx("button",{className:"text-center bg-red-200 text-red-500 w-full py-1 mt-2 rounded-lg",type:"button",onClick:l=>b(l),children:"Remove"})]},s))}),c.length>0&&e.jsx("div",{className:"flex justify-center flex-wrap gap-4",children:c?.map((r,s)=>e.jsxs("div",{className:"w-[120px] bg-gray-200 rounded-xl p-2",children:[e.jsx("img",{className:"rounded-lg aspect-square object-cover object-center w-full",src:r.previewURL,alt:""}),e.jsx("div",{className:"text-[12px] mt-2",children:r.file.name.slice(0,13)}),e.jsxs("div",{className:"text-[10px] text-gray-600 mt-[2px]",children:[(r.file.size/(1024*1024)).toFixed(2)," kb"]}),e.jsx("button",{className:"text-center bg-red-200 text-red-500 w-full py-1 mt-2 rounded-lg",children:"Remove"})]},s))}),e.jsxs("label",{htmlFor:"dropzone-file",className:"flex flex-col items-center text-center justify-center w-full h-full p-4 border-2 border-gray-300 border-dashed rounded-xl cursor-pointer bg-gray-100",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(P,{className:"w-8 h-8 mb-4 text-gray-500"}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG or JPG (MAX. 1000x1000px)"})]}),e.jsx("input",{value:"",onChange:r=>h(Array.from(r.target.files)),multiple:!0,id:"dropzone-file",type:"file",className:"hidden"})]})]})}),e.jsxs("div",{className:"w-full h-fit grid gap-4",children:[e.jsxs("div",{className:"",children:[e.jsx("label",{children:"Product Name"}),e.jsx("input",{type:"text",maxLength:200,className:"px-4 py-2 rounded-xl border border-gray-300 w-full mt-2",value:a.name,onChange:r=>t({...a,name:r.target.value}),placeholder:"Product Name",required:!0})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"",children:[e.jsx("p",{children:"Category"}),e.jsx("div",{className:"px-4 py-2 bg-gray-200 rounded-xl disabled:bg-gray-100 border border-gray-300 w-full mt-2",children:a.category?.name})]}),e.jsxs("div",{className:"",children:[e.jsx("p",{children:"Sub-Category"}),e.jsx("div",{className:"px-4 py-2 bg-gray-200 rounded-xl disabled:bg-gray-100 border border-gray-300 w-full mt-2",children:a.subcategory?.name})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"",children:[e.jsx("label",{children:"Brand"}),e.jsx("input",{type:"text",maxLength:100,className:"px-4 py-2 rounded-xl border border-gray-300 w-full mt-2",value:a.brand,onChange:r=>t({...a,brand:r.target.value}),placeholder:"Brand"})]}),e.jsxs("div",{className:"",children:[e.jsx("label",{children:"Color"}),e.jsx("input",{type:"text",maxLength:100,className:"px-4 py-2 rounded-xl border border-gray-300 w-full mt-2",value:a.color,onChange:r=>t({...a,color:r.target.value}),placeholder:"Color",required:!0})]})]}),e.jsxs("div",{className:"input-box",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:a?.description,onChange:r=>t({...a,description:r.target.value}),className:"px-4 py-3 rounded-xl border border-gray-300 w-full mt-2",name:"",id:"",rows:6,placeholder:"Short description about the product"})]}),e.jsxs("div",{className:"",children:[e.jsx("label",{children:"Measurement"}),e.jsx("input",{type:"text",maxLength:100,className:"px-4 py-2 rounded-xl border border-gray-300 w-full mt-2",value:a.measurement,onChange:r=>t({...a,measurement:r.target.value}),placeholder:"Measurement",required:!0})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"btn bg-black text-white px-4 py-2 rounded-xl w-full",type:"submit",children:"Update Product"}),e.jsx("button",{className:"btn btn-danger px-4 py-2 rounded-xl bg-red-200 text-red-600",type:"reset",onClick:g,children:"Clear"})]})]})]})}),o?.upload&&e.jsx("div",{className:"p-6 pb-2",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full dark:bg-gray-700",children:e.jsxs("div",{className:"bg-green-600 text-xs font-medium text-blue-100 text-center p-0.5 leading-none rounded-full transition-all",style:{width:o?.value},children:[o?.value,"%"]})})})]})})};export{A as default};
