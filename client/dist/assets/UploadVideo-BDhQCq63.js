import{r as b,N as g,u as h,K as f,j as e,A as j,Q as o}from"./index-OXO4aT_R.js";import{u as v}from"./useCategoryAPI-lcmxaJIz.js";const w=()=>{const[r,n]=b.useState(""),a=g(),{token:d}=h(s=>s.auth),{UploadVideoAPI:c,GetSubCategoryNameAPI:t,SubCategoryName:i,Progress:l,DeleteVideoAPI:m}=v();f(async()=>{d&&a?.id&&await t({token:d,id:a.id})});const u=async s=>{s.preventDefault(),r&&d&&a?.id?(await c({video:r,token:d,id:a.id}),await t({token:d,id:a.id})):o.error("Please fill")},x=async({token:s,id:p})=>{if(s&&p)await m({token:s,id:a.id}),await t({token:s,id:a.id});else return o.error("Token missing")};return e.jsxs("div",{className:"upload-video-page",children:[e.jsx("h2",{className:"text-[1.3rem] font-semibold",children:"Upload Video"}),e.jsxs("h3",{className:"text-base font-medium ml-4 mt-2 flex gap-2 items-center",children:["Category / ",e.jsx("span",{className:"",children:i?.name})]}),i?.video?e.jsxs("div",{className:"mt-4 ml-4",children:[e.jsx("h3",{className:"mb-2",children:"Already Uploaded Video"}),e.jsxs("video",{width:"500",controls:!0,children:[e.jsx("source",{src:`${j}/image/video/:100/${i?.video}`,type:"video/mp4"}),"Your browser does not support HTML video."]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>x({token:d,id:a?.id}),className:"btn btn-danger mt-3 px-4 py-2 rounded-xl bg-red-200 text-red-600",children:"Delete Video"})})]}):e.jsx("div",{children:e.jsxs("form",{className:"mt-2 w-full max-w-[400px] ml-4",onSubmit:u,children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsx("div",{className:"",children:e.jsx("input",{type:"file",className:"px-4 py-2 rounded-xl bg-white  border border-gray-300 w-full mt-2",onChange:s=>n(s.target.files[0]),placeholder:"Name",required:!0})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"btn bg-black text-white px-4 py-2 rounded-xl w-full",type:"submit",children:"Upload Video"}),e.jsx("button",{className:"btn btn-danger px-4 py-2 rounded-xl bg-red-200 text-red-600",type:"reset",children:"Clear"})]})]}),l?.upload&&e.jsx("div",{className:"p-6 pb-2 w-full",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full dark:bg-gray-700",children:e.jsxs("div",{className:"bg-green-600 text-xs font-medium text-blue-100 text-center p-0.5 leading-none rounded-full transition-all",style:{width:`${l?.value}%`},children:[l?.value,"%"]})})})]})})]})};export{w as default};
