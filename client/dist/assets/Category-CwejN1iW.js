import{r as u,a1 as A,a2 as U,a3 as Y,a4 as O,a5 as L,a6 as C,R as f,a7 as q,a8 as He,a9 as Ve,aa as ae,ab as _e,ac as Ne,ad as Ye,ae as Ce,af as Ee,ag as qe,ah as _,ai as se,aj as H,ak as D,al as $,am as Ke,an as xe,ao as fe,ap as Je,aq as $e,ar as E,as as Xe,at as ke,au as Ze,av as ge,aw as Se,ax as Fe,ay as he,az as Qe,aA as V,aB as We,aC as et,aD as tt,aE as at,aF as st,aG as rt,aH as lt,aI as nt,aJ as it,aK as ve,aL as ot,aM as dt,aN as ct,aO as be,G as le,u as z,j as e,Q as K,A as J,L as ut,K as mt}from"./index-OXO4aT_R.js";import{u as M}from"./useCategoryAPI-lcmxaJIz.js";import{A as pt}from"./index-MR0y3hMJ.js";import{B as Ae}from"./index-xcsXKtYV.js";import{a as xt}from"./index-BizbptX5.js";let ft=u.createContext(void 0);function gt(){return u.useContext(ft)}let ne=u.createContext(null);ne.displayName="DescriptionContext";function Ie(){let t=u.useContext(ne);if(t===null){let a=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(a,Ie),a}return t}function ht(){let[t,a]=u.useState([]);return[t.length>0?t.join(" "):void 0,u.useMemo(()=>function(s){let r=C(d=>(a(o=>[...o,d]),()=>a(o=>{let i=o.slice(),n=i.indexOf(d);return n!==-1&&i.splice(n,1),i}))),l=u.useMemo(()=>({register:r,slot:s.slot,name:s.name,props:s.props,value:s.value}),[r,s.slot,s.name,s.props,s.value]);return f.createElement(ne.Provider,{value:l},s.children)},[a])]}let vt="p";function bt(t,a){let s=u.useId(),r=gt(),{id:l=`headlessui-description-${s}`,...d}=t,o=Ie(),i=U(a);Y(()=>o.register(l),[l,o.register]);let n=O({...o.slot,disabled:r||!1}),c={ref:i,...o.props,id:l};return L()({ourProps:c,theirProps:d,slot:n,defaultTag:vt,name:o.name||"Description"})}let yt=A(bt),jt=Object.assign(yt,{}),re=new Map,T=new Map;function ye(t){var a;let s=(a=T.get(t))!=null?a:0;return T.set(t,s+1),s!==0?()=>je(t):(re.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>je(t))}function je(t){var a;let s=(a=T.get(t))!=null?a:1;if(s===1?T.delete(t):T.set(t,s-1),s!==1)return;let r=re.get(t);r&&(r["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",r["aria-hidden"]),t.inert=r.inert,re.delete(t))}function wt(t,{allowed:a,disallowed:s}={}){let r=q(t,"inert-others");Y(()=>{var l,d;if(!r)return;let o=He();for(let n of(l=s?.())!=null?l:[])n&&o.add(ye(n));let i=(d=a?.())!=null?d:[];for(let n of i){if(!n)continue;let c=Ve(n);if(!c)continue;let p=n.parentElement;for(;p&&p!==c.body;){for(let g of p.children)i.some(v=>g.contains(v))||o.add(ye(g));p=p.parentElement}}return o.dispose},[r,a,s])}function ie(t,a){let s=u.useRef([]),r=C(t);u.useEffect(()=>{let l=[...s.current];for(let[d,o]of a.entries())if(s.current[d]!==o){let i=r(a,l);return s.current=a,i}},[r,...a])}function Nt(t){function a(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",a))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",a),a())}let k=[];Nt(()=>{function t(a){if(!ae(a.target)||a.target===document.body||k[0]===a.target)return;let s=a.target;s=s.closest(_e),k.unshift(s??a.target),k=k.filter(r=>r!=null&&r.isConnected),k.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function Ct(t,a=typeof document<"u"?document.defaultView:null,s){let r=q(t,"escape");Ne(a,"keydown",l=>{r&&(l.defaultPrevented||l.key===Ye.Escape&&s(l))})}function Et(){var t;let[a]=u.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[s,r]=u.useState((t=a?.matches)!=null?t:!1);return Y(()=>{if(!a)return;function l(d){r(d.matches)}return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},[a]),s}function Pe(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let a=new Set;for(let s of t.current)Xe(s.current)&&a.add(s.current);return a}let $t="div";var F=(t=>(t[t.None=0]="None",t[t.InitialFocus=1]="InitialFocus",t[t.TabLock=2]="TabLock",t[t.FocusLock=4]="FocusLock",t[t.RestoreFocus=8]="RestoreFocus",t[t.AutoFocus=16]="AutoFocus",t))(F||{});function kt(t,a){let s=u.useRef(null),r=U(s,a),{initialFocus:l,initialFocusFallback:d,containers:o,features:i=15,...n}=t;Ce()||(i=0);let c=Ee(s.current);It(i,{ownerDocument:c});let p=Pt(i,{ownerDocument:c,container:s,initialFocus:l,initialFocusFallback:d});Lt(i,{ownerDocument:c,container:s,containers:o,previousActiveElement:p});let g=qe(),v=C(b=>{if(!_(s.current))return;let S=s.current;(j=>j())(()=>{se(g.current,{[H.Forwards]:()=>{D(S,$.First,{skipElements:[b.relatedTarget,d]})},[H.Backwards]:()=>{D(S,$.Last,{skipElements:[b.relatedTarget,d]})}})})}),m=q(!!(i&2),"focus-trap#tab-lock"),y=Ke(),N=u.useRef(!1),x={ref:r,onKeyDown(b){b.key=="Tab"&&(N.current=!0,y.requestAnimationFrame(()=>{N.current=!1}))},onBlur(b){if(!(i&4))return;let S=Pe(o);_(s.current)&&S.add(s.current);let j=b.relatedTarget;ae(j)&&j.dataset.headlessuiFocusGuard!=="true"&&(Le(S,j)||(N.current?D(s.current,se(g.current,{[H.Forwards]:()=>$.Next,[H.Backwards]:()=>$.Previous})|$.WrapAround,{relativeTo:b.target}):ae(b.target)&&E(b.target)))}},w=L();return f.createElement(f.Fragment,null,m&&f.createElement(xe,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:fe.Focusable}),w({ourProps:x,theirProps:n,defaultTag:$t,name:"FocusTrap"}),m&&f.createElement(xe,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:fe.Focusable}))}let St=A(kt),Ft=Object.assign(St,{features:F});function At(t=!0){let a=u.useRef(k.slice());return ie(([s],[r])=>{r===!0&&s===!1&&ke(()=>{a.current.splice(0)}),r===!1&&s===!0&&(a.current=k.slice())},[t,k,a]),C(()=>{var s;return(s=a.current.find(r=>r!=null&&r.isConnected))!=null?s:null})}function It(t,{ownerDocument:a}){let s=!!(t&8),r=At(s);ie(()=>{s||Ze(a?.body)&&E(r())},[s]),Je(()=>{s&&E(r())})}function Pt(t,{ownerDocument:a,container:s,initialFocus:r,initialFocusFallback:l}){let d=u.useRef(null),o=q(!!(t&1),"focus-trap#initial-focus"),i=$e();return ie(()=>{if(t===0)return;if(!o){l!=null&&l.current&&E(l.current);return}let n=s.current;n&&ke(()=>{if(!i.current)return;let c=a?.activeElement;if(r!=null&&r.current){if(r?.current===c){d.current=c;return}}else if(n.contains(c)){d.current=c;return}if(r!=null&&r.current)E(r.current);else{if(t&16){if(D(n,$.First|$.AutoFocus)!==ge.Error)return}else if(D(n,$.First)!==ge.Error)return;if(l!=null&&l.current&&(E(l.current),a?.activeElement===l.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}d.current=a?.activeElement})},[l,o,t]),d}function Lt(t,{ownerDocument:a,container:s,containers:r,previousActiveElement:l}){let d=$e(),o=!!(t&4);Ne(a?.defaultView,"focus",i=>{if(!o||!d.current)return;let n=Pe(r);_(s.current)&&n.add(s.current);let c=l.current;if(!c)return;let p=i.target;_(p)?Le(n,p)?(l.current=p,E(p)):(i.preventDefault(),i.stopPropagation(),E(c)):E(l.current)},!0)}function Le(t,a){for(let s of t)if(s.contains(a))return!0;return!1}var Rt=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Rt||{}),Dt=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(Dt||{});let Tt={0(t,a){return t.titleId===a.id?t:{...t,titleId:a.id}}},oe=u.createContext(null);oe.displayName="DialogContext";function X(t){let a=u.useContext(oe);if(a===null){let s=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,X),s}return a}function Ut(t,a){return se(a.type,Tt,t,a)}let we=A(function(t,a){let s=u.useId(),{id:r=`headlessui-dialog-${s}`,open:l,onClose:d,initialFocus:o,role:i="dialog",autoFocus:n=!0,__demoMode:c=!1,unmount:p=!1,...g}=t,v=u.useRef(!1);i=(function(){return i==="dialog"||i==="alertdialog"?i:(v.current||(v.current=!0,console.warn(`Invalid role [${i}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let m=Fe();l===void 0&&m!==null&&(l=(m&V.Open)===V.Open);let y=u.useRef(null),N=U(y,a),x=Ee(y.current),w=l?0:1,[b,S]=u.useReducer(Ut,{titleId:null,descriptionId:null,panelRef:u.createRef()}),j=C(()=>d(!1)),de=C(h=>S({type:0,id:h})),I=Ce()?w===0:!1,[Re,De]=We(),Te={get current(){var h;return(h=b.panelRef.current)!=null?h:y.current}},ee=et(),{resolveContainers:te}=tt({mainTreeNode:ee,portals:Re,defaultContainers:[Te]}),ce=m!==null?(m&V.Closing)===V.Closing:!1;wt(c||ce?!1:I,{allowed:C(()=>{var h,pe;return[(pe=(h=y.current)==null?void 0:h.closest("[data-headlessui-portal]"))!=null?pe:null]}),disallowed:C(()=>{var h;return[(h=ee?.closest("body > *:not(#headlessui-portal-root)"))!=null?h:null]})});let P=at.get(null);Y(()=>{if(I)return P.actions.push(r),()=>P.actions.pop(r)},[P,r,I]);let ue=st(P,u.useCallback(h=>P.selectors.isTop(h,r),[P,r]));rt(ue,te,h=>{h.preventDefault(),j()}),Ct(ue,x?.defaultView,h=>{h.preventDefault(),h.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),j()}),lt(c||ce?!1:I,x,te),nt(I,y,j);let[Ue,Oe]=ht(),ze=u.useMemo(()=>[{dialogState:w,close:j,setTitleId:de,unmount:p},b],[w,j,de,p,b]),me=O({open:w===0}),Me={ref:N,id:r,role:i,tabIndex:-1,"aria-modal":c?void 0:w===0?!0:void 0,"aria-labelledby":b.titleId,"aria-describedby":Ue,unmount:p},Be=!Et(),R=F.None;I&&!c&&(R|=F.RestoreFocus,R|=F.TabLock,n&&(R|=F.AutoFocus),Be&&(R|=F.InitialFocus));let Ge=L();return f.createElement(it,null,f.createElement(ve,{force:!0},f.createElement(ot,null,f.createElement(oe.Provider,{value:ze},f.createElement(dt,{target:y},f.createElement(ve,{force:!1},f.createElement(Oe,{slot:me},f.createElement(De,null,f.createElement(Ft,{initialFocus:o,initialFocusFallback:y,containers:te,features:R},f.createElement(ct,{value:j},Ge({ourProps:Me,theirProps:g,slot:me,defaultTag:Ot,features:zt,visible:w===0,name:"Dialog"})))))))))))}),Ot="div",zt=be.RenderStrategy|be.Static;function Mt(t,a){let{transition:s=!1,open:r,...l}=t,d=Fe(),o=t.hasOwnProperty("open")||d!==null,i=t.hasOwnProperty("onClose");if(!o&&!i)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!i)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!d&&typeof t.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${t.open}`);if(typeof t.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${t.onClose}`);return(r!==void 0||s)&&!l.static?f.createElement(he,null,f.createElement(Qe,{show:r,transition:s,unmount:l.unmount},f.createElement(we,{ref:a,...l}))):f.createElement(he,null,f.createElement(we,{ref:a,open:r,...l}))}let Bt="div";function Gt(t,a){let s=u.useId(),{id:r=`headlessui-dialog-panel-${s}`,transition:l=!1,...d}=t,[{dialogState:o,unmount:i},n]=X("Dialog.Panel"),c=U(a,n.panelRef),p=O({open:o===0}),g=C(x=>{x.stopPropagation()}),v={ref:c,id:r,onClick:g},m=l?Se:u.Fragment,y=l?{unmount:i}:{},N=L();return f.createElement(m,{...y},N({ourProps:v,theirProps:d,slot:p,defaultTag:Bt,name:"Dialog.Panel"}))}let Ht="div";function Vt(t,a){let{transition:s=!1,...r}=t,[{dialogState:l,unmount:d}]=X("Dialog.Backdrop"),o=O({open:l===0}),i={ref:a,"aria-hidden":!0},n=s?Se:u.Fragment,c=s?{unmount:d}:{},p=L();return f.createElement(n,{...c},p({ourProps:i,theirProps:r,slot:o,defaultTag:Ht,name:"Dialog.Backdrop"}))}let _t="h2";function Yt(t,a){let s=u.useId(),{id:r=`headlessui-dialog-title-${s}`,...l}=t,[{dialogState:d,setTitleId:o}]=X("Dialog.Title"),i=U(a);u.useEffect(()=>(o(r),()=>o(null)),[r,o]);let n=O({open:d===0}),c={ref:i,id:r};return L()({ourProps:c,theirProps:l,slot:n,defaultTag:_t,name:"Dialog.Title"})}let qt=A(Mt),B=A(Gt),Z=A(Vt),G=A(Yt),Q=Object.assign(qt,{Panel:B,Title:G,Description:jt});function W(t){return le({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(t)}function Kt(t){return le({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm120 182.15a8.62 8.62 0 0 1-8.62 8.62h-59.54a8.61 8.61 0 0 1-6.09-14.71l22.17-22.17-5.6-6.51a87.38 87.38 0 1 0-62.94 148 87.55 87.55 0 0 0 82.42-58.25A16 16 0 1 1 368 295.8a119.4 119.4 0 1 1-112.62-159.18 118.34 118.34 0 0 1 86.36 36.95l.56.62 4.31 5 14.68-14.68a8.44 8.44 0 0 1 6-2.54 8.61 8.61 0 0 1 8.68 8.63z"},child:[]}]})(t)}const Jt=({FetchData:t})=>{const[a,s]=u.useState(!1),[r,l]=u.useState({file:null,previewURL:null}),[d,o]=u.useState(""),{token:i}=z(g=>g.auth),{CreateCategoryAPI:n,GetCategoriesAPI:c}=M(),p=async g=>{g.preventDefault(),d&&i?(await n({category:d,image:r?.file,token:i}),o(""),l(null),await c({token:i}),s(!1),t()):K.error("Please fill")};return e.jsx("div",{className:"AddCategory",children:e.jsxs("div",{className:"",children:[e.jsx("button",{onClick:()=>s(!0),className:"rounded-xl ml-auto block bg-black px-6 py-2 font-semibold text-gray-200 hover:bg-gray-800",children:"Add Category"}),e.jsxs(Q,{open:a,onClose:s,className:"relative z-10",children:[e.jsx(Z,{transition:!0,className:"fixed inset-0 bg-gray-500/75 transition-opacity data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in"}),e.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:e.jsx(B,{transition:!0,className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all data-closed:translate-y-4 data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in sm:my-8 sm:w-full sm:max-w-lg data-closed:sm:translate-y-0 data-closed:sm:scale-95",children:e.jsx("div",{className:"bg-white p-6 relative",children:e.jsx("div",{className:"",children:e.jsxs("div",{className:"",children:[e.jsx(G,{as:"h3",className:"text-lg font-semibold text-gray-900",children:"Add Category"}),e.jsx("div",{className:"absolute top-0 right-0 p-4 cursor-pointer",onClick:()=>s(!1),children:e.jsx(W,{className:"text-[30px]"})}),e.jsx("form",{className:"mt-2 w-full",onSubmit:p,children:e.jsxs("div",{className:"mt-4 grid gap-4",children:[e.jsxs("div",{className:"",children:[e.jsx("label",{children:"Category Name"}),e.jsx("input",{type:"text",maxLength:100,className:"px-4 py-2 rounded-xl bg-white  border border-gray-300 w-full mt-2",value:d,onChange:g=>o(g.target.value),placeholder:"Name",required:!0})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"btn bg-black text-white px-4 py-2 rounded-xl w-full",type:"submit",children:"Create Category"}),e.jsx("button",{className:"btn btn-danger px-4 py-2 rounded-xl bg-red-200 text-red-600",type:"reset",children:"Clear"})]})]})})]})})})})})})]})]})})};function Xt(t){return le({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Video_On"},child:[{tag:"path",attr:{d:"M21.05,5.05a1.433,1.433,0,0,0-1.48.08L16.25,7.37V6.56a2.5,2.5,0,0,0-2.5-2.5H4.69a2.5,2.5,0,0,0-2.5,2.5V17.44a2.5,2.5,0,0,0,2.5,2.5h9.06a2.5,2.5,0,0,0,2.5-2.5v-.81l3.32,2.24a1.5,1.5,0,0,0,.81.24,1.414,1.414,0,0,0,1.43-1.43V6.32A1.437,1.437,0,0,0,21.05,5.05Zm-5.8,12.39a1.5,1.5,0,0,1-1.5,1.5H4.69a1.5,1.5,0,0,1-1.5-1.5V6.56a1.5,1.5,0,0,1,1.5-1.5h9.06a1.5,1.5,0,0,1,1.5,1.5Zm5.56.24a.415.415,0,0,1-.23.38.425.425,0,0,1-.45-.02l-3.88-2.62V8.58l3.88-2.62a.425.425,0,0,1,.45-.02.415.415,0,0,1,.23.38Z"},child:[]}]}]})(t)}const Zt=({FetchData:t,Data:a})=>{const[s,r]=u.useState(!1),[l,d]=u.useState({file:null,previewURL:null}),[o,i]=u.useState(a?.name||""),{token:n}=z(m=>m.auth),{UpdateSubCategoryAPI:c,Progress:p}=M(),g=m=>{d({file:m,previewURL:URL.createObjectURL(m)})},v=async m=>{m.preventDefault(),o&&n&&a?._id?(await c({id:a._id,subcategory:o,image:l?.file,token:n}),i(""),d(null),r(!1),t()):K.error("Please fill")};return e.jsx("div",{className:"EditCategory",children:e.jsxs("div",{className:"",children:[e.jsx("button",{onClick:()=>r(!0),className:"rounded-md ml-auto block border bg-green-100 px-2 py-2 font-semibold text-green-600 hover:bg-green-200",children:e.jsx(xt,{})}),e.jsxs(Q,{open:s,onClose:r,className:"relative z-10",children:[e.jsx(Z,{transition:!0,className:"fixed inset-0 bg-gray-500/75 transition-opacity data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in"}),e.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:e.jsx(B,{transition:!0,className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all data-closed:translate-y-4 data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in sm:my-8 sm:w-full sm:max-w-lg data-closed:sm:translate-y-0 data-closed:sm:scale-95",children:e.jsx("div",{className:"bg-white p-6 relative",children:e.jsx("div",{className:"",children:e.jsxs("div",{className:"",children:[e.jsx(G,{as:"h3",className:"text-lg font-semibold text-gray-900",children:"Update Subcategory"}),e.jsx("div",{className:"absolute top-0 right-0 p-4 cursor-pointer",onClick:()=>r(!1),children:e.jsx(W,{className:"text-[30px]"})}),p?.upload&&e.jsx("div",{className:"p-6 pt-4 pb-2 w-full",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full dark:bg-gray-700",children:e.jsxs("div",{className:"bg-green-600 text-xs font-medium text-blue-100 text-center p-0.5 leading-none rounded-full transition-all",style:{width:`${p?.value}%`},children:[p?.value,"%"]})})}),e.jsxs("form",{className:"mt-2 w-full",onSubmit:v,children:[a?.image&&e.jsx("div",{children:e.jsx("img",{className:"rounded-2xl bg-gray-200 mb-3",src:`${J}/image/200/${a?.image}`,alt:""})}),e.jsxs("div",{className:"flex flex-col gap-4 items-center justify-center w-full h-full",children:[l?.file&&e.jsx("div",{className:"flex justify-center flex-wrap gap-4",children:e.jsxs("div",{className:"w-[120px] bg-gray-200 rounded-xl p-2",children:[e.jsx("img",{className:"rounded-lg w-full h-[120px] object-cover",src:l?.previewURL,alt:""}),e.jsx("div",{className:"text-[12px] mt-2",children:l?.file?.name.slice(0,13)}),e.jsxs("div",{className:"text-[10px] text-gray-600 mt-[2px]",children:[(l?.file?.size/(1024*1024)).toFixed(2)," kb"]}),e.jsx("button",{type:"button",className:"text-center bg-red-200 text-red-500 w-full py-1 mt-2 rounded-lg",children:"Remove"})]})}),e.jsxs("label",{htmlFor:"dropzone-file",className:"flex flex-col items-center text-center justify-center w-full h-full p-4 border-2 border-gray-300 border-dashed rounded-xl cursor-pointer bg-gray-100",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(Ae,{className:"w-8 h-8 mb-4 text-gray-500"}),e.jsx("p",{className:"text-sm text-gray-500 font-medium mb-2",children:"Update new image"}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG or JPG (MAX. 1000x1000px)"})]}),e.jsx("input",{onChange:m=>g(m.target.files[0]),id:"dropzone-file",type:"file",className:"hidden"})]})]}),e.jsxs("div",{className:"mt-4 grid gap-4",children:[e.jsxs("div",{className:"",children:[e.jsx("label",{children:"Category Name"}),e.jsx("input",{type:"text",maxLength:100,className:"px-4 py-2 rounded-xl bg-white  border border-gray-300 w-full mt-2",value:o||a?.name,onChange:m=>i(m.target.value),placeholder:"Name",required:!0})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"btn bg-black text-white px-4 py-2 rounded-xl w-full",type:"submit",children:"Update Subcategory"}),e.jsx("button",{className:"btn btn-danger px-4 py-2 rounded-xl bg-red-200 text-red-600",type:"reset",children:"Clear"})]})]})]})]})})})})})})]})]})})},Qt=({Item:t,Refresh:a,FetchData:s})=>{const[r,l]=u.useState(!1),[d,o]=u.useState(""),[i,n]=u.useState({name:"",description:""}),{token:c}=z(x=>x.auth),{CreateSubCategoryAPI:p,GetCategoriesAPI:g,DeleteSubCategoryAPI:v}=M(),m=()=>{n(""),o({file:null,previewURL:null})},y=async x=>{x.preventDefault(),i&&c?(await p({name:i.name,description:i.description,categoryId:t?._id,token:c,Image:d}),n(""),o({file:null,previewURL:null}),a(c)):K.error("Please fill")},N=async({id:x})=>{if(window.confirm("Are you sure to delete this sub-category?"))await v({id:x,token:c}),a(c);else return;await g({token:c})};return e.jsx("div",{className:"AddCategory",children:e.jsxs("div",{className:"",children:[e.jsx("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-green-700 text-center text-white rounded-lg hover:bg-green-500",children:"Add Sub-Category"}),e.jsxs(Q,{open:r,onClose:l,className:"relative z-10",children:[e.jsx(Z,{transition:!0,className:"fixed inset-0 bg-gray-500/75 transition-opacity data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in"}),e.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:e.jsx(B,{transition:!0,className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all data-closed:translate-y-4 data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in sm:my-8 sm:w-full sm:max-w-lg data-closed:sm:translate-y-0 data-closed:sm:scale-95",children:e.jsx("div",{className:"bg-white p-6 relative",children:e.jsx("div",{className:"",children:e.jsxs("div",{className:"",children:[e.jsx(G,{as:"h3",className:"text-lg font-semibold text-gray-900",children:"Sub-Categories"}),e.jsx("div",{className:"absolute top-0 right-0 p-4 cursor-pointer",onClick:()=>l(!1),children:e.jsx(W,{className:"text-[30px]"})}),e.jsx("div",{className:"mt-1 px-3",children:e.jsx("ul",{className:"text-gray-800 grid gap-1",children:t?.subcategories?.map((x,w)=>e.jsx("li",{className:"py-2 px-4 rounded-md bg-gray-200 ",children:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("p",{className:"font-medium",children:w+1}),e.jsx("img",{className:"bg-gray-300 w-[35px] h-[35px] object-cover object-center rounded-md",src:`${J}/image/200/${x?.image}`,alt:""}),e.jsx("p",{className:"text-wrap text-[13px]",children:x?.name}),e.jsxs("div",{className:"ml-auto cursor-pointer  flex gap-2 items-center",children:[e.jsx(Zt,{FetchData:s,Data:x}),e.jsxs(ut,{to:`/my-admin/category/subcategory/upload-video/${x?._id}`,className:"bg-indigo-500 text-white text-[12px] py-1 px-3 rounded-lg flex items-center gap-2",children:[e.jsx(Xt,{className:"text-[25px] "}),"Upload Video"]}),e.jsx(pt,{className:"text-[35px] text-red-500 bg-red-200 py-1 px-2 rounded-lg",onClick:()=>N({id:x?._id})})]})]})},w))})}),e.jsx("form",{className:"w-full mt-4",onSubmit:y,onReset:m,children:e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"",children:[e.jsx("label",{children:"Add New Sub-category"}),e.jsx("input",{type:"text",maxLength:100,className:"px-4 py-2 rounded-xl bg-white  border border-gray-300 w-full mt-1",value:i.name,onChange:x=>n({...i,name:x.target.value}),placeholder:"Name",required:!0})]}),e.jsxs("div",{className:"",children:[e.jsx("label",{children:"Description"}),e.jsx("input",{type:"text",className:"px-4 py-2 rounded-xl bg-white  border border-gray-300 w-full mt-1",value:i.description,onChange:x=>n({...i,description:x.target.value}),placeholder:"Description"})]}),e.jsxs("div",{className:"",children:[e.jsx("label",{children:"Upload Image"}),e.jsx("input",{type:"file",onChange:x=>o(x.target.files[0]),className:"px-4 py-2 rounded-xl bg-white  border border-gray-300 w-full mt-1"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"btn bg-black text-white px-4 py-2 rounded-xl w-full",type:"submit",children:"Add"}),e.jsx("button",{className:"btn btn-danger px-4 py-2 rounded-xl bg-red-200 text-red-600",type:"reset",onClick:m,children:"Clear"})]})]})})]})})})})})})]})]})})},Wt=({FetchData:t,Data:a})=>{const[s,r]=u.useState(!1),[l,d]=u.useState({file:null,previewURL:null}),[o,i]=u.useState(a?.name||""),{token:n}=z(m=>m.auth),{UpdateCategoryAPI:c,GetCategoriesAPI:p}=M(),g=m=>{d({file:m,previewURL:URL.createObjectURL(m)})},v=async m=>{m.preventDefault(),o&&n&&a?._id?(await c({id:a._id,category:o,image:l?.file,token:n}),i(""),d(null),await p({token:n}),r(!1),t()):K.error("Please fill")};return e.jsx("div",{className:"EditCategory",children:e.jsxs("div",{className:"",children:[e.jsx("button",{onClick:()=>r(!0),className:"rounded-xl ml-auto block bg-indigo-600 px-4 py-2 font-semibold text-gray-200 hover:bg-indigo-500",children:"Edit"}),e.jsxs(Q,{open:s,onClose:r,className:"relative z-10",children:[e.jsx(Z,{transition:!0,className:"fixed inset-0 bg-gray-500/75 transition-opacity data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in"}),e.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:e.jsx(B,{transition:!0,className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all data-closed:translate-y-4 data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in sm:my-8 sm:w-full sm:max-w-lg data-closed:sm:translate-y-0 data-closed:sm:scale-95",children:e.jsx("div",{className:"bg-white p-6 relative",children:e.jsx("div",{className:"",children:e.jsxs("div",{className:"",children:[e.jsx(G,{as:"h3",className:"text-lg font-semibold text-gray-900",children:"Update Category"}),e.jsx("div",{className:"absolute top-0 right-0 p-4 cursor-pointer",onClick:()=>r(!1),children:e.jsx(W,{className:"text-[30px]"})}),e.jsxs("form",{className:"mt-2 w-full",onSubmit:v,children:[a?.image&&e.jsx("div",{children:e.jsx("img",{className:"rounded-2xl bg-gray-200 mb-3",src:`${J}/image/200/${a?.image}`,alt:""})}),e.jsxs("div",{className:"flex flex-col gap-4 items-center justify-center w-full h-full",children:[l?.file&&e.jsx("div",{className:"flex justify-center flex-wrap gap-4",children:e.jsxs("div",{className:"w-[120px] bg-gray-200 rounded-xl p-2",children:[e.jsx("img",{className:"rounded-lg w-full h-[120px] object-cover",src:l?.previewURL,alt:""}),e.jsx("div",{className:"text-[12px] mt-2",children:l?.file?.name.slice(0,13)}),e.jsxs("div",{className:"text-[10px] text-gray-600 mt-[2px]",children:[(l?.file?.size/(1024*1024)).toFixed(2)," kb"]}),e.jsx("button",{type:"button",className:"text-center bg-red-200 text-red-500 w-full py-1 mt-2 rounded-lg",children:"Remove"})]})}),e.jsxs("label",{htmlFor:"dropzone-file",className:"flex flex-col items-center text-center justify-center w-full h-full p-4 border-2 border-gray-300 border-dashed rounded-xl cursor-pointer bg-gray-100",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(Ae,{className:"w-8 h-8 mb-4 text-gray-500"}),e.jsx("p",{className:"text-sm text-gray-500 font-medium mb-2",children:"Update new image"}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG or JPG (MAX. 1000x1000px)"})]}),e.jsx("input",{onChange:m=>g(m.target.files[0]),id:"dropzone-file",type:"file",className:"hidden"})]})]}),e.jsxs("div",{className:"mt-4 grid gap-4",children:[e.jsxs("div",{className:"",children:[e.jsx("label",{children:"Category Name"}),e.jsx("input",{type:"text",maxLength:100,className:"px-4 py-2 rounded-xl bg-white  border border-gray-300 w-full mt-2",value:o||a?.name,onChange:m=>i(m.target.value),placeholder:"Name",required:!0})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"btn bg-black text-white px-4 py-2 rounded-xl w-full",type:"submit",children:"Update Category"}),e.jsx("button",{className:"btn btn-danger px-4 py-2 rounded-xl bg-red-200 text-red-600",type:"reset",children:"Clear"})]})]})]})]})})})})})})]})]})})},la=()=>{const{token:t}=z(n=>n.auth),{Categories:a,GetCategoriesAPI:s,DeleteCategoryAPI:r}=M();mt(async()=>{t&&await s({token:t})});const l=async()=>{t&&await s({token:t})},d=async n=>{n.preventDefault(),t&&(n.target.classList.add("animate-spin","duration-500"),setTimeout(()=>{n.target.classList.remove("animate-spin","duration-500")},3e3),await s({token:t}))},o=async({id:n})=>{if(window.confirm("Are you sure to delete this category?"))await r({id:n,token:t});else return;await s({token:t})},i=async n=>{n&&await s({token:n})};return e.jsx("div",{className:"Category",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"section-header text-[1.3rem] font-semibold flex items-center gap-2",children:["Category ",e.jsx(Kt,{onClick:d,className:"cursor-pointer transition-all text-[25px] text-blue-600"})]}),e.jsx(Jt,{FetchData:l})]}),e.jsx("div",{className:"mt-3 rounded-xl overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{scope:"col",className:"py-3 px-6 text-start ",children:"Name"}),e.jsx("th",{scope:"col",className:"py-3 px-6 text-center ",children:"Sub-Category"}),e.jsx("th",{scope:"col",className:"py-3 px-6 text-center ",children:"Products"}),e.jsx("th",{scope:"col",className:"py-3 px-6 text-center ",children:"Action"})]})}),e.jsx("tbody",{className:"bg-gray-100",children:a?.map((n,c)=>e.jsxs("tr",{className:"mx-4",children:[e.jsx("td",{scope:"row",className:"py-2 px-6 text-start",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{className:"rounded-md bg-gray-300 w-[40px] h-[40px] object-cover object-center",src:`${J}/image/200/${n?.image}`,alt:""}),e.jsx("p",{className:"",children:n?.name})]})}),e.jsx("td",{className:"py-3 px-6 text-center",children:n?.subcategoryCount}),e.jsx("td",{className:"py-3 px-6 text-center",children:n?.productCount||0}),e.jsxs("td",{className:"py-3 px-6 text-center flex gap-2 justify-center",children:[e.jsx("div",{children:e.jsx(Qt,{Item:n,FetchData:l,Refresh:i})}),e.jsx(Wt,{FetchData:l,Data:n}),e.jsx("button",{onClick:()=>o({id:n?._id}),className:"px-4 py-1 bg-red-200 text-center text-red-700 rounded-lg",children:"Delete"})]})]},c))})]})})]})})};export{la as default};
